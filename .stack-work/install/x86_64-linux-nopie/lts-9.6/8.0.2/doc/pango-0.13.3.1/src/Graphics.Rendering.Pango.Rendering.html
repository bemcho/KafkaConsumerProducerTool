<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LINE 2 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-3"></a><span class="hs-comment">-- -*-haskell-*-</span><span>
</span><a name="line-4"></a><span class="hs-comment">-- GIMP Toolkit (GTK) - text layout functions Rendering</span><span>
</span><a name="line-5"></a><span class="hs-comment">--</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- Author : Axel Simon</span><span>
</span><a name="line-7"></a><span class="hs-comment">--</span><span>
</span><a name="line-8"></a><span class="hs-comment">-- Created: 8 Feburary 2003</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">-- Copyright (C) 1999-2005 Axel Simon</span><span>
</span><a name="line-11"></a><span class="hs-comment">--</span><span>
</span><a name="line-12"></a><span class="hs-comment">-- This library is free software; you can redistribute it and/or</span><span>
</span><a name="line-13"></a><span class="hs-comment">-- modify it under the terms of the GNU Lesser General Public</span><span>
</span><a name="line-14"></a><span class="hs-comment">-- License as published by the Free Software Foundation; either</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- version 2.1 of the License, or (at your option) any later version.</span><span>
</span><a name="line-16"></a><span class="hs-comment">--</span><span>
</span><a name="line-17"></a><span class="hs-comment">-- This library is distributed in the hope that it will be useful,</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span>
</span><a name="line-19"></a><span class="hs-comment">-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span><span>
</span><a name="line-20"></a><span class="hs-comment">-- Lesser General Public License for more details.</span><span>
</span><a name="line-21"></a><span class="hs-comment">--</span><span>
</span><a name="line-22"></a><span class="hs-comment">--</span><span>
</span><a name="line-23"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-24"></a><span class="hs-comment">-- Maintainer : gtk2hs-users@lists.sourceforge.net</span><span>
</span><a name="line-25"></a><span class="hs-comment">-- Stability : provisional</span><span>
</span><a name="line-26"></a><span class="hs-comment">-- Portability : portable (depends on GHC)</span><span>
</span><a name="line-27"></a><span class="hs-comment">--</span><span>
</span><a name="line-28"></a><span class="hs-comment">-- Functions to run the rendering pipeline.</span><span>
</span><a name="line-29"></a><span class="hs-comment">--</span><span>
</span><a name="line-30"></a><span class="hs-comment">-- * This module provides elementary rendering functions. For a simpler</span><span>
</span><a name="line-31"></a><span class="hs-comment">-- interface, consider using 'PangoLayout's.</span><span>
</span><a name="line-32"></a><span class="hs-comment">--</span><span>
</span><a name="line-33"></a><span class="hs-comment">-- * The Pango rendering pipeline takes a string of Unicode characters,</span><span>
</span><a name="line-34"></a><span class="hs-comment">-- divides them into sequences of letters that have the same characteristics</span><span>
</span><a name="line-35"></a><span class="hs-comment">-- such as font, size, color, etc. Such a sequence is called 'PangoItem'.</span><span>
</span><a name="line-36"></a><span class="hs-comment">-- Each 'PangoItem' is then converted into one 'GlyphItem', that is</span><span>
</span><a name="line-37"></a><span class="hs-comment">-- an actual sequence of glyphs,</span><span>
</span><a name="line-38"></a><span class="hs-comment">-- where several characters might be turned into legatures or clusters,</span><span>
</span><a name="line-39"></a><span class="hs-comment">-- e.g. an \&quot;e\&quot; and an accent modifier are turned into a single glyph. These</span><span>
</span><a name="line-40"></a><span class="hs-comment">-- 'GlyphItem's can then be rendered onto the output device with functions</span><span>
</span><a name="line-41"></a><span class="hs-comment">-- such as 'Graphics.Rendering.Cairo.cairoShowGlyphString'.</span><span>
</span><a name="line-42"></a><span class="hs-comment">--</span><span>
</span><a name="line-43"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-44"></a><span>  </span><span class="hs-comment">-- * 'PangoItem': Partition text into units with similar attributes.</span><span>
</span><a name="line-45"></a><span>  </span><a href="Graphics.Rendering.Pango.Rendering.html#pangoItemize"><span class="hs-identifier hs-var">PangoItem</span></a><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>  </span><a href="Graphics.Rendering.Pango.Rendering.html#pangoItemGetFontMetrics"><span class="hs-identifier hs-var">pangoItemize</span></a><span class="hs-special">,</span><span>
</span><a name="line-47"></a><span>  </span><span class="hs-identifier">pangoItemGetFontMetrics</span><span class="hs-special">,</span><span>
</span><a name="line-48"></a><span>  </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemGetLanguage"><span class="hs-identifier hs-var">pangoItemGetFont</span></a><span class="hs-special">,</span><span>
</span><a name="line-49"></a><span>  </span><span class="hs-identifier">pangoItemGetLanguage</span><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>
</span><a name="line-51"></a><span>  </span><span class="hs-comment">-- * 'GlyphItem': Turn text segments into glyph sequences.</span><span>
</span><a name="line-52"></a><span>  </span><a href="Graphics.Rendering.Pango.Rendering.html#pangoShape"><span class="hs-identifier hs-var">GlyphItem</span></a><span class="hs-special">,</span><span>
</span><a name="line-53"></a><span>  </span><a href="Graphics.Rendering.Pango.GlyphStorage.html#glyphItemExtents"><span class="hs-identifier hs-var">pangoShape</span></a><span class="hs-special">,</span><span>
</span><a name="line-54"></a><span>  </span><a href="Graphics.Rendering.Pango.GlyphStorage.html#glyphItemExtentsRange"><span class="hs-identifier hs-var">glyphItemExtents</span></a><span class="hs-special">,</span><span>
</span><a name="line-55"></a><span>  </span><span class="hs-identifier">glyphItemExtentsRange</span><span class="hs-special">,</span><span>
</span><a name="line-56"></a><span>  </span><a href="Graphics.Rendering.Pango.GlyphStorage.html#glyphItemXToIndex"><span class="hs-identifier hs-var">glyphItemIndexToX</span></a><span class="hs-special">,</span><span>
</span><a name="line-57"></a><span>  </span><a href="Graphics.Rendering.Pango.GlyphStorage.html#glyphItemGetLogicalWidths"><span class="hs-identifier hs-var">glyphItemXToIndex</span></a><span class="hs-special">,</span><span>
</span><a name="line-58"></a><span>  </span><span class="hs-identifier">glyphItemGetLogicalWidths</span><span class="hs-special">,</span><span>
</span><a name="line-59"></a><span>
</span><a name="line-60"></a><span>  </span><span class="hs-identifier">glyphItemSplit</span><span>
</span><a name="line-61"></a><span>
</span><a name="line-62"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Glib</span><span class="hs-operator">.</span><span class="hs-identifier">FFI</span><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.Rendering.Pango.Structs.html"><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Glib</span><span class="hs-operator">.</span><span class="hs-identifier">UTFString</span></a><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawGetOffset"><span class="hs-identifier hs-var">Graphics</span><span class="hs-operator hs-var">.</span></a><span class="hs-identifier">Rendering</span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawGetLength"><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">Pango</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">Structs</span></a><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">pangoItemRawAnalysis</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">intToPu</span><span class="hs-special">,</span><span>
</span><a name="line-67"></a><span>  </span><span class="hs-identifier">pangoItemRawGetOffset</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">pangoItemRawGetLength</span><span class="hs-special">,</span><span>
</span><a name="line-68"></a><span>  </span><span class="hs-identifier">pangoItemGetFont</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">pangoItemGetLanguage</span><span class="hs-special">)</span><span>
</span><a name="line-69"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.Rendering.Pango.BasicTypes.html"><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span><span class="hs-identifier">Types</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">PangoContext</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Font</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-70"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.Rendering.Pango.Enums.html"><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span></a><span class="hs-identifier">BasicTypes</span><span>
</span><a name="line-71"></a><span class="hs-pragma">{-# LINE 70 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-72"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.Rendering.Pango.GlyphStorage.html"><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span><span class="hs-identifier">Enums</span></a><span>
</span><a name="line-73"></a><span class="hs-pragma">{-# LINE 71 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-74"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span><span class="hs-identifier">Attributes</span><span>
</span><a name="line-75"></a><span class="hs-pragma">{-# LINE 72 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-76"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">Rendering</span><span class="hs-operator">.</span><span class="hs-identifier">Pango</span><span class="hs-operator">.</span><span class="hs-identifier">GlyphStorage</span><span>
</span><a name="line-77"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Glib</span><span class="hs-operator">.</span><span class="hs-identifier">GList</span><span>
</span><a name="line-78"></a><span class="hs-pragma">{-# LINE 74 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-79"></a><span>
</span><a name="line-80"></a><span>
</span><a name="line-81"></a><span class="hs-pragma">{-# LINE 76 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span class="hs-comment">-- | Turn a string into a sequence of glyphs.</span><span>
</span><a name="line-84"></a><span class="hs-comment">--</span><span>
</span><a name="line-85"></a><span class="hs-comment">-- * Partitions the input string into segments with the same text direction</span><span>
</span><a name="line-86"></a><span class="hs-comment">-- and shaping engine. The generated list of items will be in logical order</span><span>
</span><a name="line-87"></a><span class="hs-comment">-- (the start offsets of the items are ascending).</span><span>
</span><a name="line-88"></a><span class="hs-comment">--</span><span>
</span><a name="line-89"></a><span class="hs-identifier">pangoItemize</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">GlibString</span><span> </span><span class="hs-identifier">string</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">PangoContext</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">string</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">PangoAttribute</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">PangoItem</span><span class="hs-special">]</span><span>
</span><a name="line-90"></a><span class="hs-identifier">pangoItemize</span><span> </span><span class="hs-identifier">pc</span><span> </span><span class="hs-identifier">str</span><span> </span><a href="Graphics.Rendering.Pango.BasicTypes.html#makeNewPangoItemRaw"><span class="hs-identifier hs-var">attrs</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-91"></a><span>  </span><span class="hs-identifier">ps</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">makeNewPangoString</span><span> </span><span class="hs-identifier">str</span><span>
</span><a name="line-92"></a><span>  </span><span class="hs-identifier">withAttrList</span><span> </span><span class="hs-identifier">ps</span><span> </span><span class="hs-identifier">attrs</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">alPtr</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-93"></a><span>    </span><span class="hs-identifier">glist</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">withPangoString</span><span> </span><span class="hs-identifier">ps</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">l</span><span> </span><span class="hs-identifier">strPtr</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-94"></a><span>             </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">PangoContext</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-identifier">arg5</span><span> </span><span class="hs-identifier">arg6</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">pango_itemize</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-identifier">arg5</span><span> </span><span class="hs-identifier">arg6</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">pc</span><span> </span><span class="hs-identifier">strPtr</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-identifier">l</span><span> </span><span class="hs-identifier">alPtr</span><span> </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-identifier">piPtrs</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">fromGList</span><span> </span><span class="hs-identifier">glist</span><span>
</span><a name="line-96"></a><span>    </span><span class="hs-identifier">piRaws</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mapM</span><span> </span><span class="hs-identifier">makeNewPangoItemRaw</span><span> </span><span class="hs-identifier">piPtrs</span><span>
</span><a name="line-97"></a><span>    </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">PangoItem</span><span> </span><a href="Graphics.Rendering.Pango.BasicTypes.html#PangoItem"><span class="hs-identifier hs-type">ps</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">piRaws</span><span class="hs-special">)</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span>
</span><a name="line-100"></a><span class="hs-comment">-- | Retrieve the metrics of the font that was chosen to break the given</span><span>
</span><a name="line-101"></a><span class="hs-comment">-- 'PangoItem'.</span><span>
</span><a name="line-102"></a><span class="hs-comment">--</span><span>
</span><a name="line-103"></a><span class="hs-identifier">pangoItemGetFontMetrics</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_descent"><span class="hs-identifier hs-var">PangoItem</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_descent"><span class="hs-identifier hs-var">IO</span></a><span> </span><span class="hs-identifier">FontMetrics</span><span>
</span><a name="line-104"></a><span class="hs-identifier">pangoItemGetFontMetrics</span><span> </span><span class="hs-identifier">pi</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-105"></a><span>  </span><span class="hs-identifier">font</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_char_width"><span class="hs-identifier hs-var">pangoItemGetFont</span></a><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_char_width"><span class="hs-identifier hs-var">pi</span></a><span>
</span><a name="line-106"></a><span>  </span><a name="local-6989586621679060045"><a href="#local-6989586621679060045"><span class="hs-identifier">lang</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pangoItemGetLanguage</span><span> </span><span class="hs-identifier">pi</span><span>
</span><a name="line-107"></a><span>  </span><span class="hs-identifier">mPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_digit_width"><span class="hs-identifier hs-var">Font</span></a><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_digit_width"><span class="hs-identifier hs-var">arg1</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_digit_width"><span class="hs-identifier hs-var">Language</span></a><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_approximate_digit_width"><span class="hs-identifier hs-var">arg2</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">pango_font_get_metrics</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">font</span><span> </span><span class="hs-identifier">lang</span><span>
</span><a name="line-108"></a><span>  </span><span class="hs-identifier">ascent</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pango_font_metrics_get_ascent</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-109"></a><span>  </span><a name="local-6989586621679060046"><a href="#local-6989586621679060046"><span class="hs-identifier">descent</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pango_font_metrics_get_descent</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-110"></a><span>  </span><span class="hs-identifier">approximate_char_width</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-111"></a><span>      </span><span class="hs-identifier">pango_font_metrics_get_approximate_char_width</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-112"></a><span>  </span><span class="hs-identifier">approximate_digit_width</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-113"></a><span>      </span><span class="hs-identifier">pango_font_metrics_get_approximate_digit_width</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-114"></a><span>
</span><a name="line-115"></a><span>  </span><a name="local-6989586621679060049"><a href="#local-6989586621679060049"><span class="hs-identifier">underline_position</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-116"></a><span>      </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_strikethrough_thickness"><span class="hs-identifier hs-var">pango_font_metrics_get_underline_position</span></a><span> </span><a href="Graphics.Rendering.Pango.Rendering.html#pango_font_metrics_get_strikethrough_thickness"><span class="hs-identifier hs-var">mPtr</span></a><span>
</span><a name="line-117"></a><span>  </span><span class="hs-identifier">underline_thickness</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-118"></a><span>      </span><span class="hs-identifier">pango_font_metrics_get_underline_thickness</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-119"></a><span>  </span><span class="hs-identifier">strikethrough_position</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-120"></a><span>      </span><span class="hs-identifier">pango_font_metrics_get_strikethrough_position</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-identifier">strikethrough_thickness</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-122"></a><span>      </span><span class="hs-identifier">pango_font_metrics_get_strikethrough_thickness</span><span> </span><span class="hs-identifier">mPtr</span><span>
</span><a name="line-123"></a><span>
</span><a name="line-124"></a><span>  </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">FontMetrics</span><span>
</span><a name="line-125"></a><span>          </span><span class="hs-special">(</span><a href="Graphics.Rendering.Pango.Structs.html#intToPu"><span class="hs-identifier hs-var">intToPu</span></a><span> </span><a href="#local-6989586621679060047"><span class="hs-identifier hs-var">ascent</span></a><span class="hs-special">)</span><span>
</span><a name="line-126"></a><span>          </span><span class="hs-special">(</span><a href="Graphics.Rendering.Pango.Structs.html#intToPu"><span class="hs-identifier hs-var">intToPu</span></a><span> </span><a href="#local-6989586621679060048"><span class="hs-identifier hs-var">descent</span></a><span class="hs-special">)</span><span>
</span><a name="line-127"></a><span>          </span><span class="hs-special">(</span><a href="Graphics.Rendering.Pango.Structs.html#intToPu"><span class="hs-identifier hs-var">intToPu</span></a><span> </span><a href="#local-6989586621679060049"><span class="hs-identifier hs-var">approximate_char_width</span></a><span class="hs-special">)</span><span>
</span><a name="line-128"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">intToPu</span><span> </span><span class="hs-identifier">approximate_digit_width</span><span class="hs-special">)</span><span>
</span><a name="line-129"></a><span>
</span><a name="line-130"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">intToPu</span><span> </span><span class="hs-identifier">underline_position</span><span class="hs-special">)</span><span>
</span><a name="line-131"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">intToPu</span><span> </span><span class="hs-identifier">underline_thickness</span><span class="hs-special">)</span><span>
</span><a name="line-132"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">intToPu</span><span> </span><span class="hs-identifier">strikethrough_position</span><span class="hs-special">)</span><span>
</span><a name="line-133"></a><span>          </span><span class="hs-special">(</span><span class="hs-identifier">intToPu</span><span> </span><span class="hs-identifier">strikethrough_thickness</span><span class="hs-special">)</span><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><span>         </span><span class="hs-special">)</span><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span class="hs-comment">-- | Turn a 'PangoItem' into a 'GlyphItem'.</span><span>
</span><a name="line-138"></a><span class="hs-comment">--</span><span>
</span><a name="line-139"></a><span class="hs-comment">-- * Turns a 'PangoItem', that is, sequence of characters with the same</span><span>
</span><a name="line-140"></a><span class="hs-comment">-- attributes such as font, size and color, into a 'GlyphItem' which</span><span>
</span><a name="line-141"></a><span class="hs-comment">-- contains the graphical representation of these characters. 'GlyphItem's</span><span>
</span><a name="line-142"></a><span class="hs-comment">-- can be rendered directly (and several times) onto screens.</span><span>
</span><a name="line-143"></a><span class="hs-comment">--</span><span>
</span><a name="line-144"></a><span class="hs-identifier">pangoShape</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawGetLength"><span class="hs-identifier hs-var">PangoItem</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawGetLength"><span class="hs-identifier hs-var">IO</span></a><span> </span><span class="hs-identifier">GlyphItem</span><span>
</span><a name="line-145"></a><span class="hs-identifier">pangoShape</span><span> </span><a name="local-6989586621679060060"><a href="#local-6989586621679060060"><span class="hs-identifier">pi</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier">PangoItem</span><span> </span><a href="Graphics.Rendering.Pango.BasicTypes.html#GlyphStringRaw"><span class="hs-identifier hs-var">ps</span></a><span> </span><a href="Graphics.Rendering.Pango.BasicTypes.html#GlyphStringRaw"><span class="hs-identifier hs-var">pir</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-146"></a><span>  </span><span class="hs-identifier">withPangoString</span><span> </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawAnalysis"><span class="hs-identifier hs-var">ps</span></a><span> </span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawAnalysis"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a href="Graphics.Rendering.Pango.Structs.html#pangoItemRawAnalysis"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="#local-6989586621679060054"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-identifier">strPtr</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withPangoItemRaw</span><span> </span><span class="hs-identifier">pir</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">pirPtr</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-147"></a><span>  </span><span class="hs-identifier hs-var">gsPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pango_glyph_string_new</span><span>
</span><a name="line-148"></a><span class="hs-pragma">{-# LINE 142 &quot;./Graphics/Rendering/Pango/Rendering.chs&quot; #-}</span><span>
</span><a name="line-149"></a><span>  </span><span class="hs-identifier">gs</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">makeNewGlyphStringRaw</span><span> </span><span class="hs-identifier">gsPtr</span><span>
</span><a name="line-150"></a><span>  </span><span class="hs-identifier">ofs</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pangoItemRawGetOffset</span><span> </span><a href="Graphics.Rendering.Pango.Types.html#PangoContext"><span class="hs-identifier hs-type">pirPtr</span></a><span>
</span><a name="line-151"></a><span>  </span><span class="hs-identifier">len</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">pangoItemRawGetLength</span><span> </span><span class="hs-identifier">pirPtr</span><span>
</span><a name="line-152"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">arg1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">GlyphStringRaw</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr4</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">pango_shape</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">argPtr4</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">strPtr</span><span> </span><span class="hs-special">`</span><span class="hs-identifier">plusPtr</span><span class="hs-special">`</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">ofs</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">len</span><span class="hs-special">)</span><span>
</span><a name="line-153"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">pangoItemRawAnalysis</span><span> </span><span class="hs-identifier">pirPtr</span><span class="hs-special">)</span><span> </span><a href="Graphics.Rendering.Pango.Types.html#Font"><span class="hs-identifier hs-type">gs</span></a><span>
</span><a name="line-154"></a><span>  </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">GlyphItem</span><span> </span><span class="hs-identifier">pi</span><span> </span><span class="hs-identifier">gs</span><span class="hs-special">)</span><span>
</span><a name="line-155"></a><span>
</span><a name="line-156"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_itemize&quot;</span><span>
</span><a name="line-157"></a><span>  </span><span class="hs-identifier">pango_itemize</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">PangoContext</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_get_metrics&quot;</span><span>
</span><a name="line-160"></a><span>  </span><span class="hs-identifier">pango_font_get_metrics</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Font</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Language</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_ascent&quot;</span><span>
</span><a name="line-163"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_ascent</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_descent&quot;</span><span>
</span><a name="line-166"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_descent</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-167"></a><span>
</span><a name="line-168"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_approximate_char_width&quot;</span><span>
</span><a name="line-169"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_approximate_char_width</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-170"></a><span>
</span><a name="line-171"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_approximate_digit_width&quot;</span><span>
</span><a name="line-172"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_approximate_digit_width</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-173"></a><span>
</span><a name="line-174"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_underline_position&quot;</span><span>
</span><a name="line-175"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_underline_position</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_underline_thickness&quot;</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_underline_thickness</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><span>
</span><a name="line-180"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_strikethrough_position&quot;</span><span>
</span><a name="line-181"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_strikethrough_position</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-182"></a><span>
</span><a name="line-183"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_font_metrics_get_strikethrough_thickness&quot;</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-identifier">pango_font_metrics_get_strikethrough_thickness</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-185"></a><span>
</span><a name="line-186"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_glyph_string_new&quot;</span><span>
</span><a name="line-187"></a><span>  </span><span class="hs-identifier">pango_glyph_string_new</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">GlyphStringRaw</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-188"></a><span>
</span><a name="line-189"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;pango_shape&quot;</span><span>
</span><a name="line-190"></a><span>  </span><span class="hs-identifier">pango_shape</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">GlyphStringRaw</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-191"></a></pre></body></html>