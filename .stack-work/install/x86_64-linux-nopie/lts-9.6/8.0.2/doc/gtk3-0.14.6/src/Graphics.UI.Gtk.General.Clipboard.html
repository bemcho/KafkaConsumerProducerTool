<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# LINE 2 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-3"></a><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><a name="line-4"></a><span>
</span><a name="line-5"></a><span class="hs-pragma">{-# LINE 3 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- -*-haskell-*-</span><span>
</span><a name="line-7"></a><span class="hs-comment">-- GIMP Toolkit (GTK) Clipboard</span><span>
</span><a name="line-8"></a><span class="hs-comment">--</span><span>
</span><a name="line-9"></a><span class="hs-comment">-- Author : Axel Simon</span><span>
</span><a name="line-10"></a><span class="hs-comment">--</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- Created: 26 March 2007</span><span>
</span><a name="line-12"></a><span class="hs-comment">--</span><span>
</span><a name="line-13"></a><span class="hs-comment">-- Copyright (C) 2007 Axel Simon</span><span>
</span><a name="line-14"></a><span class="hs-comment">--</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- This library is free software; you can redistribute it and/or</span><span>
</span><a name="line-16"></a><span class="hs-comment">-- modify it under the terms of the GNU Lesser General Public</span><span>
</span><a name="line-17"></a><span class="hs-comment">-- License as published by the Free Software Foundation; either</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- version 2.1 of the License, or (at your option) any later version.</span><span>
</span><a name="line-19"></a><span class="hs-comment">--</span><span>
</span><a name="line-20"></a><span class="hs-comment">-- This library is distributed in the hope that it will be useful,</span><span>
</span><a name="line-21"></a><span class="hs-comment">-- but WITHOUT ANY WARRANTY; without even the implied warranty of</span><span>
</span><a name="line-22"></a><span class="hs-comment">-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU</span><span>
</span><a name="line-23"></a><span class="hs-comment">-- Lesser General Public License for more details.</span><span>
</span><a name="line-24"></a><span class="hs-comment">--</span><span>
</span><a name="line-25"></a><span class="hs-comment">-- I removed all definitions for the clipboard by Juergen Nicklisch since</span><span>
</span><a name="line-26"></a><span class="hs-comment">-- the way the clipboards were selected didn't tie in with the Selection</span><span>
</span><a name="line-27"></a><span class="hs-comment">-- module.</span><span>
</span><a name="line-28"></a><span class="hs-comment">--</span><span>
</span><a name="line-29"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-30"></a><span class="hs-comment">-- Maintainer : gtk2hs-users@lists.sourceforge.net</span><span>
</span><a name="line-31"></a><span class="hs-comment">-- Stability : provisional</span><span>
</span><a name="line-32"></a><span class="hs-comment">-- Portability : portable (depends on GHC)</span><span>
</span><a name="line-33"></a><span class="hs-comment">--</span><span>
</span><a name="line-34"></a><span class="hs-comment">-- Storing data on clipboards</span><span>
</span><a name="line-35"></a><span class="hs-comment">--</span><span>
</span><a name="line-36"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">UI</span><span class="hs-operator">.</span><span class="hs-identifier">Gtk</span><span class="hs-operator">.</span><span class="hs-identifier">General</span><span class="hs-operator">.</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-comment">-- * Detail</span><span>
</span><a name="line-39"></a><span class="hs-comment">--</span><span>
</span><a name="line-40"></a><span class="hs-comment">-- | The 'Clipboard' object represents a clipboard of data shared between</span><span>
</span><a name="line-41"></a><span class="hs-comment">-- different processes or between different widgets in the same process. Each</span><span>
</span><a name="line-42"></a><span class="hs-comment">-- clipboard is identified by a 'SelectionTag' which itself is an 'Atom'. The</span><span>
</span><a name="line-43"></a><span class="hs-comment">-- default clipboard corresponds to the 'selectionClipboard' tag; another</span><span>
</span><a name="line-44"></a><span class="hs-comment">-- commonly used clipboard is the 'selectionPrimary' tag, which, in X,</span><span>
</span><a name="line-45"></a><span class="hs-comment">-- traditionally contains the currently selected text.</span><span>
</span><a name="line-46"></a><span class="hs-comment">--</span><span>
</span><a name="line-47"></a><span class="hs-comment">-- To support having a number of different formats on the clipboard at the</span><span>
</span><a name="line-48"></a><span class="hs-comment">-- same time, the clipboard mechanism allows providing callbacks instead of</span><span>
</span><a name="line-49"></a><span class="hs-comment">-- the actual data. When you set the contents of the clipboard, you can either</span><span>
</span><a name="line-50"></a><span class="hs-comment">-- supply the data directly (via functions like 'clipboardSetText'), or you</span><span>
</span><a name="line-51"></a><span class="hs-comment">-- can supply a callback to be called at a later time when the data is needed</span><span>
</span><a name="line-52"></a><span class="hs-comment">-- (via 'clipboardSetWithData'). Providing a callback also avoids having to</span><span>
</span><a name="line-53"></a><span class="hs-comment">-- make copies of the data when it is not needed.</span><span>
</span><a name="line-54"></a><span class="hs-comment">--</span><span>
</span><a name="line-55"></a><span class="hs-comment">-- Setting clipboard data is done using 'clipboardSetWithData' and</span><span>
</span><a name="line-56"></a><span class="hs-comment">-- 'clipboardSetWithOwner'. Both functions are quite similar; the choice</span><span>
</span><a name="line-57"></a><span class="hs-comment">-- between the two depends mostly on which is more convenient in a particular</span><span>
</span><a name="line-58"></a><span class="hs-comment">-- situation. The former is most useful when you want to have a blob of data</span><span>
</span><a name="line-59"></a><span class="hs-comment">-- with callbacks to convert it into the various data types that you</span><span>
</span><a name="line-60"></a><span class="hs-comment">-- advertise. When the @clearFunc@ you provided is called, you simply free the</span><span>
</span><a name="line-61"></a><span class="hs-comment">-- data blob. The latter is more useful when the contents of clipboard reflect</span><span>
</span><a name="line-62"></a><span class="hs-comment">-- the internal state of a 'GObject' (As an example, for the</span><span>
</span><a name="line-63"></a><span class="hs-comment">-- 'selectionPrimary' clipboard, when an entry widget provides the clipboard's</span><span>
</span><a name="line-64"></a><span class="hs-comment">-- contents the contents are simply the text within the selected region.) If</span><span>
</span><a name="line-65"></a><span class="hs-comment">-- the contents change, the entry widget can call 'clipboardSetWithOwner' to</span><span>
</span><a name="line-66"></a><span class="hs-comment">-- update the timestamp for clipboard ownership, without having to worry about</span><span>
</span><a name="line-67"></a><span class="hs-comment">-- @clearFunc@ being called.</span><span>
</span><a name="line-68"></a><span class="hs-comment">--</span><span>
</span><a name="line-69"></a><span class="hs-comment">-- Requesting the data from the clipboard is essentially asynchronous. If the</span><span>
</span><a name="line-70"></a><span class="hs-comment">-- contents of the clipboard are provided within the same process, then a</span><span>
</span><a name="line-71"></a><span class="hs-comment">-- direct function call will be made to retrieve the data, but if they are</span><span>
</span><a name="line-72"></a><span class="hs-comment">-- provided by another process, then the data needs to be retrieved from the</span><span>
</span><a name="line-73"></a><span class="hs-comment">-- other process, which may take some time. To avoid blocking the user</span><span>
</span><a name="line-74"></a><span class="hs-comment">-- interface, the call to request the selection, 'clipboardRequestContents'</span><span>
</span><a name="line-75"></a><span class="hs-comment">-- takes a callback that will be called when the contents are received (or</span><span>
</span><a name="line-76"></a><span class="hs-comment">-- when the request fails.) If you don't want to deal with providing a</span><span>
</span><a name="line-77"></a><span class="hs-comment">-- separate callback, you can also use 'clipboardWaitForContents'. What this</span><span>
</span><a name="line-78"></a><span class="hs-comment">-- does is run the GLib main loop recursively waiting for the contents. This</span><span>
</span><a name="line-79"></a><span class="hs-comment">-- can simplify the code flow, but you still have to be aware that other</span><span>
</span><a name="line-80"></a><span class="hs-comment">-- callbacks in your program can be called while this recursive mainloop is</span><span>
</span><a name="line-81"></a><span class="hs-comment">-- running.</span><span>
</span><a name="line-82"></a><span class="hs-comment">--</span><span>
</span><a name="line-83"></a><span class="hs-comment">-- Along with the functions to get the clipboard contents as an arbitrary data</span><span>
</span><a name="line-84"></a><span class="hs-comment">-- chunk, there are also functions to retrieve it as text,</span><span>
</span><a name="line-85"></a><span class="hs-comment">-- 'clipboardRequestText' and 'clipboardWaitForText'. These functions take</span><span>
</span><a name="line-86"></a><span class="hs-comment">-- care of determining which formats are advertised by the clipboard provider,</span><span>
</span><a name="line-87"></a><span class="hs-comment">-- asking for the clipboard in the best available format and converting the</span><span>
</span><a name="line-88"></a><span class="hs-comment">-- its content.</span><span>
</span><a name="line-89"></a><span>
</span><a name="line-90"></a><span class="hs-comment">-- * Class Hierarchy</span><span>
</span><a name="line-91"></a><span class="hs-comment">--</span><span>
</span><a name="line-92"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-93"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-94"></a><span class="hs-comment">-- | 'GObject'</span><span>
</span><a name="line-95"></a><span class="hs-comment">-- | +----Clipboard</span><span>
</span><a name="line-96"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-97"></a><span>
</span><a name="line-98"></a><span class="hs-comment">-- * Types</span><span>
</span><a name="line-99"></a><span>  </span><a href="Graphics.UI.Gtk.Types.html#toClipboard"><span class="hs-identifier hs-var">Clipboard</span></a><span class="hs-special">,</span><span>
</span><a name="line-100"></a><span>  </span><span class="hs-identifier">ClipboardClass</span><span class="hs-special">,</span><span>
</span><a name="line-101"></a><span>  </span><span class="hs-identifier">castToClipboard</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">gTypeClipboard</span><span class="hs-special">,</span><span>
</span><a name="line-102"></a><span>  </span><a href="Graphics.UI.Gtk.General.Structs.html#selectionPrimary"><span class="hs-identifier hs-var">toClipboard</span></a><span class="hs-special">,</span><span>
</span><a name="line-103"></a><span>
</span><a name="line-104"></a><span class="hs-comment">-- * Constants</span><span>
</span><a name="line-105"></a><span>  </span><span class="hs-identifier">selectionPrimary</span><span class="hs-special">,</span><span>
</span><a name="line-106"></a><span>  </span><span class="hs-identifier">selectionSecondary</span><span class="hs-special">,</span><span>
</span><a name="line-107"></a><span>  </span><span class="hs-identifier">selectionClipboard</span><span class="hs-special">,</span><span>
</span><a name="line-108"></a><span>
</span><a name="line-109"></a><span class="hs-comment">-- * Methods</span><span>
</span><a name="line-110"></a><span>  </span><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardGetDisplay"><span class="hs-identifier hs-var">clipboardGet</span></a><span class="hs-special">,</span><span>
</span><a name="line-111"></a><span>
</span><a name="line-112"></a><span>  </span><span class="hs-identifier">clipboardGetForDisplay</span><span class="hs-special">,</span><span>
</span><a name="line-113"></a><span>  </span><span class="hs-identifier">clipboardGetDisplay</span><span class="hs-special">,</span><span>
</span><a name="line-114"></a><span>
</span><a name="line-115"></a><span>  </span><span class="hs-identifier">clipboardSetWithData</span><span class="hs-special">,</span><span>
</span><a name="line-116"></a><span class="hs-comment">{-
  clipboardSetWithOwner,
  clipboardGetOwner,
  clipboardClear,
-}</span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-identifier">clipboardSetText</span><span class="hs-special">,</span><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span>  </span><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardRequestText"><span class="hs-identifier hs-var">clipboardSetImage</span></a><span class="hs-special">,</span><span>
</span><a name="line-124"></a><span>
</span><a name="line-125"></a><span>  </span><span class="hs-identifier">clipboardRequestContents</span><span class="hs-special">,</span><span>
</span><a name="line-126"></a><span>  </span><span class="hs-identifier">clipboardRequestText</span><span class="hs-special">,</span><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span>  </span><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardRequestTargets"><span class="hs-identifier hs-var">clipboardRequestImage</span></a><span class="hs-special">,</span><span>
</span><a name="line-129"></a><span>
</span><a name="line-130"></a><span>
</span><a name="line-131"></a><span>  </span><span class="hs-identifier">clipboardRequestTargets</span><span class="hs-special">,</span><span>
</span><a name="line-132"></a><span>
</span><a name="line-133"></a><span>  </span><span class="hs-identifier">clipboardRequestRichText</span><span class="hs-special">,</span><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><span>
</span><a name="line-136"></a><span>
</span><a name="line-137"></a><span>  </span><span class="hs-identifier">clipboardSetCanStore</span><span class="hs-special">,</span><span>
</span><a name="line-138"></a><span>  </span><span class="hs-identifier">clipboardStore</span><span class="hs-special">,</span><span>
</span><a name="line-139"></a><span>
</span><a name="line-140"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.UI.Gtk.General.DNDTypes.html"><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Glib</span><span class="hs-operator">.</span><span class="hs-identifier">FFI</span></a><span>
</span><a name="line-143"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Glib</span><span class="hs-operator">.</span><span class="hs-identifier">UTFString</span><span>
</span><a name="line-144"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.UI.Gtk.General.Selection.html"><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">UI</span><span class="hs-operator">.</span><span class="hs-identifier">Gtk</span><span class="hs-operator">.</span><span class="hs-identifier">Types</span></a><span>
</span><a name="line-145"></a><span class="hs-pragma">{-# LINE 142 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-146"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.UI.Gtk.General.Structs.html#selectionPrimary"><span class="hs-identifier hs-var">Graphics</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">UI</span></a><span class="hs-operator">.</span><span class="hs-identifier">Gtk</span><span class="hs-operator">.</span><span class="hs-identifier">General</span><span class="hs-operator">.</span><span class="hs-identifier">DNDTypes</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">SelectionTag</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">TargetTag</span><span class="hs-special">,</span><span>
</span><a name="line-147"></a><span>  </span><a href="Graphics.UI.Gtk.General.Structs.html#selectionSecondary"><span class="hs-identifier hs-var">Atom</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-148"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.UI.Gtk.General.Structs.html#selectionClipboard"><span class="hs-identifier hs-var">Graphics</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">UI</span><span class="hs-operator hs-var">.</span></a><span class="hs-identifier">Gtk</span><span class="hs-operator">.</span><span class="hs-identifier">General</span><span class="hs-operator">.</span><span class="hs-identifier">Selection</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">InfoId</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">SelectionDataM</span><span class="hs-special">)</span><span>
</span><a name="line-149"></a><span class="hs-keyword">import</span><span> </span><a href="Graphics.UI.Gtk.General.Structs.html#withTargetEntries"><span class="hs-identifier hs-var">Graphics</span><span class="hs-operator hs-var">.</span><span class="hs-identifier hs-var">UI</span><span class="hs-operator hs-var">.</span></a><span class="hs-identifier">Gtk</span><span class="hs-operator">.</span><span class="hs-identifier">General</span><span class="hs-operator">.</span><span class="hs-identifier">Structs</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-150"></a><span>  </span><span class="hs-identifier">selectionPrimary</span><span class="hs-special">,</span><span>
</span><a name="line-151"></a><span>  </span><span class="hs-identifier">selectionSecondary</span><span class="hs-special">,</span><span>
</span><a name="line-152"></a><span>  </span><span class="hs-identifier">selectionClipboard</span><span class="hs-special">,</span><span>
</span><a name="line-153"></a><span>  </span><span class="hs-identifier">withTargetEntries</span><span class="hs-special">)</span><span>
</span><a name="line-154"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-155"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Monad</span><span class="hs-operator">.</span><span class="hs-identifier">Reader</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">runReaderT</span><span class="hs-special">)</span><span>
</span><a name="line-156"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">IORef</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">newIORef</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">readIORef</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-pragma">{-# LINE 155 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-160"></a><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-comment">--------------------</span><span>
</span><a name="line-163"></a><span class="hs-comment">-- Methods</span><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span class="hs-comment">-- %hash c:d8d1 d:febf</span><span>
</span><a name="line-166"></a><span class="hs-comment">-- | Returns the clipboard object for the given selection. See</span><span>
</span><a name="line-167"></a><span class="hs-comment">-- 'clipboardGetForDisplay' for complete details.</span><span>
</span><a name="line-168"></a><span class="hs-comment">--</span><span>
</span><a name="line-169"></a><span class="hs-identifier">clipboardGet</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-170"></a><span>  </span><span class="hs-identifier">SelectionTag</span><span> </span><span class="hs-comment">-- ^ @selection@ - a 'SelectionTag' which</span><span>
</span><a name="line-171"></a><span>                 </span><span class="hs-comment">-- identifies the clipboard to use.</span><span>
</span><a name="line-172"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#gtk_clipboard_get"><span class="hs-identifier hs-var">IO</span></a><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#gtk_clipboard_get"><span class="hs-identifier hs-var">Clipboard</span></a><span> </span><span class="hs-comment">-- ^ returns the appropriate clipboard object. If no</span><span>
</span><a name="line-173"></a><span>                 </span><span class="hs-comment">-- clipboard already exists, a new one will be created. Once a</span><span>
</span><a name="line-174"></a><span>                 </span><span class="hs-comment">-- clipboard object has been created, it is persistent.</span><span>
</span><a name="line-175"></a><span class="hs-identifier">clipboardGet</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Atom</span><span> </span><span class="hs-identifier">selection</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-176"></a><span>  </span><span class="hs-identifier">makeNewGObject</span><span> </span><span class="hs-identifier">mkClipboard</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-177"></a><span>  </span><span class="hs-identifier">gtk_clipboard_get</span><span> </span><span class="hs-identifier">selection</span><span>
</span><a name="line-178"></a><span>
</span><a name="line-179"></a><span>
</span><a name="line-180"></a><span class="hs-comment">-- %hash c:251 d:39fa</span><span>
</span><a name="line-181"></a><span class="hs-comment">-- | Returns the clipboard object for the given selection. Cut\/copy\/paste</span><span>
</span><a name="line-182"></a><span class="hs-comment">-- menu items and keyboard shortcuts should use the default clipboard,</span><span>
</span><a name="line-183"></a><span class="hs-comment">-- returned by passing 'selectionClipboard' for @selection@. The</span><span>
</span><a name="line-184"></a><span class="hs-comment">-- currently-selected object or text should be provided on the clipboard</span><span>
</span><a name="line-185"></a><span class="hs-comment">-- identified by 'selectionPrimary'. Cut\/copy\/paste menu items conceptually</span><span>
</span><a name="line-186"></a><span class="hs-comment">-- copy the contents of the 'selectionPrimary' clipboard to the default</span><span>
</span><a name="line-187"></a><span class="hs-comment">-- clipboard, i.e. they copy the selection to what the user sees as the</span><span>
</span><a name="line-188"></a><span class="hs-comment">-- clipboard.</span><span>
</span><a name="line-189"></a><span class="hs-comment">--</span><span>
</span><a name="line-190"></a><span class="hs-comment">-- See</span><span>
</span><a name="line-191"></a><span class="hs-comment">-- &lt;http:</span><span>
</span><a name="line-192"></a><span class="hs-comment">-- discussion of the 'selectionClipboard' vs. 'selectionPrimary' selections</span><span>
</span><a name="line-193"></a><span class="hs-comment">-- under the X window system. On Win32 the 'selectionPrimary' clipboard is</span><span>
</span><a name="line-194"></a><span class="hs-comment">-- essentially ignored.</span><span>
</span><a name="line-195"></a><span class="hs-comment">--</span><span>
</span><a name="line-196"></a><span class="hs-comment">-- It's possible to have arbitrary named clipboards; if you do invent new</span><span>
</span><a name="line-197"></a><span class="hs-comment">-- clipboards, you should prefix the selection name with an underscore</span><span>
</span><a name="line-198"></a><span class="hs-comment">-- (because the ICCCM requires that nonstandard atoms are</span><span>
</span><a name="line-199"></a><span class="hs-comment">-- underscore-prefixed), and namespace it as well. For example, if your</span><span>
</span><a name="line-200"></a><span class="hs-comment">-- application called \&quot;Foo\&quot; has a special-purpose clipboard, you could</span><span>
</span><a name="line-201"></a><span class="hs-comment">-- create it using 'Graphics.UI.Gtk.General.Selection.atomNew'</span><span>
</span><a name="line-202"></a><span class="hs-comment">-- \&quot;_FOO_SPECIAL_CLIPBOARD\&quot;.</span><span>
</span><a name="line-203"></a><span class="hs-comment">--</span><span>
</span><a name="line-204"></a><span class="hs-comment">-- * Available since Gtk+ version 2.2</span><span>
</span><a name="line-205"></a><span class="hs-comment">--</span><span>
</span><a name="line-206"></a><span class="hs-identifier">clipboardGetForDisplay</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-207"></a><span>    </span><span class="hs-identifier">Display</span><span> </span><span class="hs-comment">-- ^ @display@ - the display for which the clipboard is to be</span><span>
</span><a name="line-208"></a><span>                 </span><span class="hs-comment">-- retrieved or created</span><span>
</span><a name="line-209"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a name="clipboardGetForDisplay"><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardGetForDisplay"><span class="hs-identifier">SelectionTag</span></a></a><span> </span><span class="hs-comment">-- ^ @selection@ - a 'SelectionTag' which</span><span>
</span><a name="line-210"></a><span>                 </span><span class="hs-comment">-- identifies the clipboard to use.</span><span>
</span><a name="line-211"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-comment">-- ^ returns the appropriate clipboard object. If no</span><span>
</span><a name="line-212"></a><span>                 </span><span class="hs-comment">-- clipboard already exists, a new one will be created. Once a</span><span>
</span><a name="line-213"></a><span>                 </span><span class="hs-comment">-- clipboard object has been created, it is persistent.</span><span>
</span><a name="line-214"></a><span class="hs-identifier">clipboardGetForDisplay</span><span> </span><span class="hs-identifier">display</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Atom</span><span> </span><span class="hs-identifier">selection</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-215"></a><span>  </span><span class="hs-identifier">makeNewGObject</span><span> </span><span class="hs-identifier">mkClipboard</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-216"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Display</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_get_for_display</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span class="hs-special">)</span><span>
</span><a name="line-217"></a><span class="hs-pragma">{-# LINE 212 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-218"></a><span>    </span><span class="hs-identifier">display</span><span> </span><span class="hs-identifier">selection</span><span>
</span><a name="line-219"></a><span>
</span><a name="line-220"></a><span class="hs-comment">-- %hash c:3931 d:93f1</span><span>
</span><a name="line-221"></a><span class="hs-comment">-- | Gets the 'Display' associated with @clipboard@</span><span>
</span><a name="line-222"></a><span class="hs-comment">--</span><span>
</span><a name="line-223"></a><span class="hs-comment">-- * Available since Gtk+ version 2.2</span><span>
</span><a name="line-224"></a><span class="hs-comment">--</span><span>
</span><a name="line-225"></a><span class="hs-identifier">clipboardGetDisplay</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-226"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">Display</span><span> </span><span class="hs-comment">-- ^ returns the 'Display' associated with @clipboard@</span><span>
</span><a name="line-227"></a><span class="hs-identifier">clipboardGetDisplay</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-228"></a><span>  </span><span class="hs-identifier">makeNewGObject</span><span> </span><span class="hs-identifier">mkDisplay</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-229"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_get_display</span><span> </span><span class="hs-identifier">argPtr1</span><span class="hs-special">)</span><span>
</span><a name="line-230"></a><span class="hs-pragma">{-# LINE 224 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-231"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-232"></a><span>
</span><a name="line-233"></a><span>
</span><a name="line-234"></a><span class="hs-comment">-- The memory management of the ClipboardGetFunc and ClipboardClearFunc sucks badly</span><span>
</span><a name="line-235"></a><span class="hs-comment">-- in that there is no consistent way in which the latter could free the function</span><span>
</span><a name="line-236"></a><span class="hs-comment">-- closure of the former, since it is *not* called when the data of the same</span><span>
</span><a name="line-237"></a><span class="hs-comment">-- object is changed. What we do is that we store the function pointers as attributes</span><span>
</span><a name="line-238"></a><span class="hs-comment">-- of the Clipboard. Overwriting or finalizing these attributes will call their</span><span>
</span><a name="line-239"></a><span class="hs-comment">-- destructors and thereby free them. Thus, by setting these attributes each time we</span><span>
</span><a name="line-240"></a><span class="hs-comment">-- install new data functions, we cuningly finalized the previous closures. Hooray.</span><span>
</span><a name="line-241"></a><span>
</span><a name="line-242"></a><span class="hs-pragma">{-# NOINLINE getFuncQuark #-}</span><span>
</span><a name="line-243"></a><span class="hs-identifier">getFuncQuark</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Quark</span><span>
</span><a name="line-244"></a><span class="hs-identifier">getFuncQuark</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">unsafePerformIO</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">quarkFromString</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;hsClipboardGetFuncClosure&quot;</span><span class="hs-glyph">::</span><span class="hs-identifier">DefaultGlibString</span><span class="hs-special">)</span><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-pragma">{-# NOINLINE clearFuncQuark #-}</span><span>
</span><a name="line-247"></a><span class="hs-identifier">clearFuncQuark</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Quark</span><span>
</span><a name="line-248"></a><span class="hs-identifier">clearFuncQuark</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">unsafePerformIO</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-operator hs-type">$</span></a><span> </span><span class="hs-identifier">quarkFromString</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;hsClipboardClearFuncClosure&quot;</span><span class="hs-glyph">::</span><span class="hs-identifier">DefaultGlibString</span><span class="hs-special">)</span><span>
</span><a name="line-249"></a><span>
</span><a name="line-250"></a><span class="hs-comment">-- %hash c:c65a d:b402</span><span>
</span><a name="line-251"></a><span class="hs-comment">-- | Virtually sets the contents of the specified clipboard by providing a</span><span>
</span><a name="line-252"></a><span class="hs-comment">-- list of supported formats for the clipboard data and a function to call to</span><span>
</span><a name="line-253"></a><span class="hs-comment">-- get the actual data when it is requested.</span><span>
</span><a name="line-254"></a><span class="hs-comment">--</span><span>
</span><a name="line-255"></a><span class="hs-identifier">clipboardSetWithData</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-256"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier">TargetTag</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">InfoId</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ @targets@ - a list containing information</span><span>
</span><a name="line-257"></a><span>                              </span><span class="hs-comment">-- about the available forms for the clipboard</span><span>
</span><a name="line-258"></a><span>                              </span><span class="hs-comment">-- data</span><span>
</span><a name="line-259"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">InfoId</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">SelectionDataM</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-260"></a><span>                              </span><span class="hs-comment">-- ^ @getFunc@ - function to call to get the</span><span>
</span><a name="line-261"></a><span>                              </span><span class="hs-comment">-- actual clipboard data, should call</span><span>
</span><a name="line-262"></a><span>                              </span><span class="hs-comment">-- 'selectionDataSet'.</span><span>
</span><a name="line-263"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @clearFunc@ - when the clipboard contents</span><span>
</span><a name="line-264"></a><span>                              </span><span class="hs-comment">-- are set again, this function will be called,</span><span>
</span><a name="line-265"></a><span>                              </span><span class="hs-comment">-- and @getFunc@ will not be subsequently called.</span><span>
</span><a name="line-266"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">Bool</span><span> </span><span class="hs-comment">-- ^ returns @True@ if setting the clipboard</span><span>
</span><a name="line-267"></a><span>                              </span><span class="hs-comment">-- data succeeded.</span><span>
</span><a name="line-268"></a><span class="hs-identifier">clipboardSetWithData</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-identifier">getFunc</span><span> </span><span class="hs-identifier">clearFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-269"></a><span>  </span><span class="hs-identifier">gFunPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardGetFunc</span><span>
</span><a name="line-270"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a href="#local-6989586621679283700"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="#local-6989586621679283700"><span class="hs-identifier hs-var">sPtr</span></a><span> </span><span class="hs-identifier">info</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">runReaderT</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">getFunc</span><span> </span><span class="hs-identifier">info</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-operator">&gt;&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-271"></a><span>  </span><span class="hs-identifier">cFunPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardClearFunc</span><span>
</span><a name="line-272"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a href="#local-6989586621679283697"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="#local-6989586621679283697"><span class="hs-identifier hs-var">_</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">clearFunc</span><span class="hs-special">)</span><span>
</span><a name="line-273"></a><span>  </span><span class="hs-identifier">res</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">withTargetEntries</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">nTargets</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-274"></a><span>    </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-identifier">toBool</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-275"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-identifier hs-var">arg5</span><span> </span><span class="hs-identifier hs-var">arg6</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#g_object_set_qdata_full"><span class="hs-operator hs-var">$</span></a><span> </span><span class="hs-glyph">\</span><a href="Graphics.UI.Gtk.General.Clipboard.html#g_object_set_qdata_full"><span class="hs-identifier hs-var">argPtr1</span></a><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_with_data</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier hs-var">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#getFuncQuark"><span class="hs-identifier hs-var">arg5</span></a><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#getFuncQuark"><span class="hs-identifier hs-var">arg6</span></a><span class="hs-special">)</span><span>
</span><a name="line-276"></a><span class="hs-pragma">{-# LINE 269 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-277"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><a name="local-6989586621679283715"><a href="#local-6989586621679283715"><span class="hs-identifier">self</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-278"></a><span>      </span><span class="hs-identifier hs-var">targets</span><span>
</span><a name="line-279"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">nTargets</span><span class="hs-special">)</span><span>
</span><a name="line-280"></a><span>      </span><span class="hs-identifier">gFunPtr</span><span>
</span><a name="line-281"></a><span>      </span><a name="ClipboardGetFunc"><a href="Graphics.UI.Gtk.General.Clipboard.html#ClipboardGetFunc"><span class="hs-identifier">cFunPtr</span></a></a><span>
</span><a name="line-282"></a><span>      </span><a name="ClipboardClearFunc"><a href="Graphics.UI.Gtk.General.Clipboard.html#ClipboardClearFunc"><span class="hs-identifier">nullPtr</span></a></a><span>
</span><a name="line-283"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">GObject</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">g_object_set_qdata_full</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toGObject</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">getFuncQuark</span><span>
</span><a name="line-284"></a><span>     </span><span class="hs-special">(</span><span class="hs-identifier">castFunPtrToPtr</span><span> </span><span class="hs-identifier">gFunPtr</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">destroyFunPtr</span><span>
</span><a name="line-285"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">GObject</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">g_object_set_qdata_full</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toGObject</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">clearFuncQuark</span><span>
</span><a name="line-286"></a><span>     </span><span class="hs-special">(</span><span class="hs-identifier">castFunPtrToPtr</span><span> </span><span class="hs-identifier">cFunPtr</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">destroyFunPtr</span><span>
</span><a name="line-287"></a><span>  </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">res</span><span>
</span><a name="line-288"></a><span>
</span><a name="line-289"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardGetFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-290"></a><span class="hs-pragma">{-# LINE 282 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-291"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardClearFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-292"></a><span class="hs-pragma">{-# LINE 283 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-293"></a><span>
</span><a name="line-294"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardGetFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-295"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardGetFunc</span><span>
</span><a name="line-296"></a><span>
</span><a name="line-297"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardClearFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-298"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">IO</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardClearFunc</span><span>
</span><a name="line-299"></a><span>
</span><a name="line-300"></a><span class="hs-comment">-- %hash c:e778 d:7b3f</span><span>
</span><a name="line-301"></a><span class="hs-comment">-- | Virtually sets the contents of the specified clipboard by providing a</span><span>
</span><a name="line-302"></a><span class="hs-comment">-- list of supported formats for the clipboard data and a function to call to</span><span>
</span><a name="line-303"></a><span class="hs-comment">-- get the actual data when it is requested.</span><span>
</span><a name="line-304"></a><span class="hs-comment">--</span><span>
</span><a name="line-305"></a><span class="hs-comment">-- The difference between this function and 'clipboardSetWithData' is that</span><span>
</span><a name="line-306"></a><span class="hs-comment">-- a 'GObject' is passed in.</span><span>
</span><a name="line-307"></a><span class="hs-comment">--</span><span>
</span><a name="line-308"></a><span class="hs-identifier">_clipboardSetWithOwner</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">GObjectClass</span><span> </span><span class="hs-identifier">owner</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-309"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier">TargetTag</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">InfoId</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ @targets@ - a list containing information</span><span>
</span><a name="line-310"></a><span>                              </span><span class="hs-comment">-- about the available forms for the clipboard</span><span>
</span><a name="line-311"></a><span>                              </span><span class="hs-comment">-- data</span><span>
</span><a name="line-312"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">InfoId</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">SelectionDataM</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-313"></a><span>                              </span><span class="hs-comment">-- ^ @getFunc@ - function to call to get the</span><span>
</span><a name="line-314"></a><span>                              </span><span class="hs-comment">-- actual clipboard data, should call</span><span>
</span><a name="line-315"></a><span>                              </span><span class="hs-comment">-- 'selectionDataSet'.</span><span>
</span><a name="line-316"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @clearFunc@ - when the clipboard contents</span><span>
</span><a name="line-317"></a><span>                              </span><span class="hs-comment">-- are set again, this function will be called,</span><span>
</span><a name="line-318"></a><span>                              </span><span class="hs-comment">-- and @getFunc@ will not be subsequently called.</span><span>
</span><a name="line-319"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">owner</span><span> </span><span class="hs-comment">-- ^ @owner@ - an object that \&quot;owns\&quot; the data.</span><span>
</span><a name="line-320"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">IO</span><span> </span><span class="hs-identifier">Bool</span><span> </span><span class="hs-comment">-- ^ returns @True@ if setting the clipboard</span><span>
</span><a name="line-321"></a><span>                              </span><span class="hs-comment">-- data succeeded. If setting the clipboard data</span><span>
</span><a name="line-322"></a><span>                              </span><span class="hs-comment">-- failed the provided callback functions will be</span><span>
</span><a name="line-323"></a><span>                              </span><span class="hs-comment">-- ignored.</span><span>
</span><a name="line-324"></a><span class="hs-identifier">_clipboardSetWithOwner</span><span> </span><a href="#local-6989586621679283728"><span class="hs-identifier hs-var">self</span></a><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-identifier">getFunc</span><span> </span><span class="hs-identifier">clearFunc</span><span> </span><span class="hs-identifier">owner</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-325"></a><span>  </span><span class="hs-identifier">gFunPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardGetFunc</span><span>
</span><a name="line-326"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a href="#local-6989586621679283727"><span class="hs-identifier hs-var">_</span></a><span> </span><a href="#local-6989586621679283727"><span class="hs-identifier hs-var">sPtr</span></a><span> </span><span class="hs-identifier">info</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">runReaderT</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">getFunc</span><span> </span><span class="hs-identifier">info</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-operator">&gt;&gt;</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-327"></a><span>  </span><span class="hs-identifier">cFunPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardClearFunc</span><span>
</span><a name="line-328"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier hs-var">_</span><span> </span><span class="hs-identifier hs-var">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">clearFunc</span><span class="hs-special">)</span><span>
</span><a name="line-329"></a><span>  </span><span class="hs-identifier">res</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">withTargetEntries</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">nTargets</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-330"></a><span>    </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-identifier">toBool</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-331"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Clipboard</span><span> </span><span class="hs-identifier hs-var">arg1</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679283727"><span class="hs-identifier hs-var">arg2</span></a><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier hs-var">arg4</span><span> </span><span class="hs-identifier hs-var">arg5</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">GObject</span><span> </span><span class="hs-identifier">arg6</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg6</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr6</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_with_owner</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-identifier">arg5</span><span> </span><span class="hs-identifier">argPtr6</span><span class="hs-special">)</span><span>
</span><a name="line-332"></a><span class="hs-pragma">{-# LINE 322 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-333"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-334"></a><span>      </span><span class="hs-identifier">targets</span><span>
</span><a name="line-335"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">nTargets</span><span class="hs-special">)</span><span>
</span><a name="line-336"></a><span>      </span><span class="hs-identifier">gFunPtr</span><span>
</span><a name="line-337"></a><span>      </span><span class="hs-identifier">cFunPtr</span><span>
</span><a name="line-338"></a><span>      </span><span class="hs-special">(</span><span class="hs-identifier">toGObject</span><span> </span><span class="hs-identifier">owner</span><span class="hs-special">)</span><span>
</span><a name="line-339"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">GObject</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">g_object_set_qdata_full</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toGObject</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">getFuncQuark</span><span>
</span><a name="line-340"></a><span>     </span><span class="hs-special">(</span><span class="hs-identifier">castFunPtrToPtr</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">gFunPtr</span></a><span class="hs-special">)</span><span> </span><span class="hs-identifier">destroyFunPtr</span><span>
</span><a name="line-341"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">GObject</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">g_object_set_qdata_full</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">toGObject</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">clearFuncQuark</span><span>
</span><a name="line-342"></a><span>     </span><span class="hs-special">(</span><span class="hs-identifier">castFunPtrToPtr</span><span> </span><span class="hs-identifier">cFunPtr</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">destroyFunPtr</span><span>
</span><a name="line-343"></a><span>  </span><a name="_clipboardGetOwner"><a href="Graphics.UI.Gtk.General.Clipboard.html#_clipboardGetOwner"><span class="hs-identifier">return</span></a></a><span> </span><a name="_clipboardGetOwner"><a href="Graphics.UI.Gtk.General.Clipboard.html#_clipboardGetOwner"><span class="hs-identifier">res</span></a></a><span>
</span><a name="line-344"></a><span>
</span><a name="line-345"></a><span class="hs-comment">-- %hash c:dba2 d:efc2</span><span>
</span><a name="line-346"></a><span class="hs-comment">-- | If the clipboard contents callbacks were set with</span><span>
</span><a name="line-347"></a><span class="hs-comment">-- 'clipboardSetWithOwner', and the 'clipboardSetWithData' or 'clipboardClear'</span><span>
</span><a name="line-348"></a><span class="hs-comment">-- has not subsequently called, returns the owner set by</span><span>
</span><a name="line-349"></a><span class="hs-comment">-- 'clipboardSetWithOwner'.</span><span>
</span><a name="line-350"></a><span class="hs-comment">--</span><span>
</span><a name="line-351"></a><span class="hs-identifier">_clipboardGetOwner</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-352"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">GObject</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ returns the owner of the clipboard, if any; otherwise</span><span>
</span><a name="line-353"></a><span>                        </span><span class="hs-comment">-- @Nothing@.</span><span>
</span><a name="line-354"></a><span class="hs-identifier">_clipboardGetOwner</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">self</span></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-355"></a><span>  </span><a name="_clipboardClear"><a href="Graphics.UI.Gtk.General.Clipboard.html#_clipboardClear"><span class="hs-identifier">maybeNull</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">makeNewGObject</span><span> </span><span class="hs-identifier">mkGObject</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span>
</span><a name="line-356"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><a href="Graphics.UI.Gtk.Types.html#Clipboard"><span class="hs-identifier hs-var">Clipboard</span></a><span> </span><a name="local-6989586621679283753"><a href="#local-6989586621679283753"><span class="hs-identifier">arg1</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">withForeignPtr</span><span> </span><a href="#local-6989586621679283753"><span class="hs-identifier hs-var">arg1</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679283754"><a href="#local-6989586621679283754"><span class="hs-identifier">argPtr1</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_get_owner</span><span> </span><span class="hs-identifier">argPtr1</span><span class="hs-special">)</span><span>
</span><a name="line-357"></a><span class="hs-pragma">{-# LINE 346 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-358"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-359"></a><span>
</span><a name="line-360"></a><span class="hs-comment">-- %hash c:d6f8 d:486</span><span>
</span><a name="line-361"></a><span class="hs-comment">-- | Clears the contents of the clipboard. Generally this should only be</span><span>
</span><a name="line-362"></a><span class="hs-comment">-- called between the time you call 'clipboardSetWithOwner' or</span><span>
</span><a name="line-363"></a><span class="hs-comment">-- 'clipboardSetWithData', and when the @clearFunc@ you supplied is called.</span><span>
</span><a name="line-364"></a><span class="hs-comment">-- Otherwise, the clipboard may be owned by someone else.</span><span>
</span><a name="line-365"></a><span class="hs-comment">--</span><span>
</span><a name="line-366"></a><span class="hs-identifier">_clipboardClear</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-367"></a><a name="clipboardSetText"><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardSetText"><span class="hs-identifier">_clipboardClear</span></a></a><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-368"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_clear</span><span> </span><span class="hs-identifier">argPtr1</span><span class="hs-special">)</span><span>
</span><a name="line-369"></a><span class="hs-pragma">{-# LINE 357 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-370"></a><span>    </span><span class="hs-special">(</span><a href="Graphics.UI.Gtk.Types.html#toClipboard"><span class="hs-identifier hs-var">toClipboard</span></a><span> </span><a href="#local-6989586621679283755"><span class="hs-identifier hs-var">self</span></a><span class="hs-special">)</span><span>
</span><a name="line-371"></a><span>
</span><a name="line-372"></a><span class="hs-comment">-- %hash c:5211 d:14c6</span><span>
</span><a name="line-373"></a><span class="hs-comment">-- | Sets the contents of the clipboard to the given UTF-8 string. Gtk+ will</span><span>
</span><a name="line-374"></a><span class="hs-comment">-- make a copy of the text and take responsibility for responding for requests</span><span>
</span><a name="line-375"></a><span class="hs-comment">-- for the text, and for converting the text into the requested format.</span><span>
</span><a name="line-376"></a><span class="hs-comment">--</span><span>
</span><a name="line-377"></a><span class="hs-identifier">clipboardSetText</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">GlibString</span><span> </span><span class="hs-identifier">string</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-378"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">string</span><span> </span><span class="hs-comment">-- ^ @text@ - the text to be set as clipboard content</span><span>
</span><a name="line-379"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-380"></a><span class="hs-identifier">clipboardSetText</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">text</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-381"></a><span>  </span><span class="hs-identifier">withUTFStringLen</span><span> </span><span class="hs-identifier">text</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">textPtr</span><span class="hs-special">,</span><span class="hs-identifier">len</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-382"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">arg2</span></a><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">arg3</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_text</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-383"></a><span class="hs-pragma">{-# LINE 370 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-384"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-385"></a><span>    </span><a name="clipboardSetImage"><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardSetImage"><span class="hs-identifier">textPtr</span></a></a><span>
</span><a name="line-386"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">len</span><span class="hs-special">)</span><span>
</span><a name="line-387"></a><span>
</span><a name="line-388"></a><span>
</span><a name="line-389"></a><span class="hs-comment">-- %hash c:5172 d:e4dd</span><span>
</span><a name="line-390"></a><span class="hs-comment">-- | Sets the contents of the clipboard to the given 'Pixbuf'. Gtk+ will take</span><span>
</span><a name="line-391"></a><span class="hs-comment">-- responsibility for responding for requests for the image, and for converting</span><span>
</span><a name="line-392"></a><span class="hs-comment">-- the image into the requested format.</span><span>
</span><a name="line-393"></a><span class="hs-comment">--</span><span>
</span><a name="line-394"></a><span class="hs-comment">-- * Available since Gtk+ version 2.6</span><span>
</span><a name="line-395"></a><span class="hs-comment">--</span><span>
</span><a name="line-396"></a><span class="hs-identifier">clipboardSetImage</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-397"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Pixbuf</span><span> </span><span class="hs-comment">-- ^ @pixbuf@ - a 'Pixbuf'</span><span>
</span><a name="line-398"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-399"></a><span class="hs-identifier">clipboardSetImage</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">pixbuf</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-400"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Pixbuf</span><span> </span><span class="hs-identifier">arg2</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr2</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_image</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">argPtr2</span><span class="hs-special">)</span><span>
</span><a name="line-401"></a><span class="hs-pragma">{-# LINE 387 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-402"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-403"></a><span>    </span><span class="hs-identifier">pixbuf</span><span>
</span><a name="line-404"></a><span>
</span><a name="line-405"></a><span>
</span><a name="line-406"></a><span class="hs-comment">-- %hash c:22cd d:f72d</span><span>
</span><a name="line-407"></a><span class="hs-comment">-- | Requests the contents of clipboard as the given target. When the results</span><span>
</span><a name="line-408"></a><span class="hs-comment">-- of the result are later received the supplied callback will be called.</span><span>
</span><a name="line-409"></a><span class="hs-comment">--</span><span>
</span><a name="line-410"></a><span class="hs-identifier">clipboardRequestContents</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-411"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">TargetTag</span><span> </span><span class="hs-comment">-- ^ @target@ - an atom representing the form</span><span>
</span><a name="line-412"></a><span>                                 </span><span class="hs-comment">-- into which the clipboard owner should</span><span>
</span><a name="line-413"></a><span>                                 </span><span class="hs-comment">-- convert the selection.</span><span>
</span><a name="line-414"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">SelectionDataM</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @callback@ - A function to call when the</span><span>
</span><a name="line-415"></a><span>                                 </span><span class="hs-comment">-- results are received (or the retrieval</span><span>
</span><a name="line-416"></a><span>                                 </span><span class="hs-comment">-- fails). If the retrieval fails,</span><span>
</span><a name="line-417"></a><span>                                 </span><span class="hs-comment">-- 'selectionDataIsValid' returns @False@.</span><span>
</span><a name="line-418"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-419"></a><span class="hs-identifier">clipboardRequestContents</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Atom</span><span> </span><span class="hs-identifier">target</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-420"></a><span>  </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">newIORef</span><span> </span><span class="hs-identifier">nullFunPtr</span><span>
</span><a name="line-421"></a><span>  </span><span class="hs-identifier">cbPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardReceivedFunc</span><span>
</span><a name="line-422"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-423"></a><span>      </span><span class="hs-identifier">freeHaskellFunPtr</span><span> </span><span class="hs-operator">=&lt;&lt;</span><span> </span><span class="hs-identifier">readIORef</span><span> </span><span class="hs-identifier">cbRef</span><span>
</span><a name="line-424"></a><span>      </span><span class="hs-identifier">runReaderT</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-identifier">sPtr</span><span>
</span><a name="line-425"></a><span>      </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-426"></a><span>  </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-427"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_request_contents</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span>
</span><a name="line-428"></a><span class="hs-pragma">{-# LINE 413 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-429"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-430"></a><span>    </span><span class="hs-identifier">target</span><span>
</span><a name="line-431"></a><span>    </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-432"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-433"></a><span>
</span><a name="line-434"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardReceivedFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-435"></a><span class="hs-pragma">{-# LINE 419 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-436"></a><span>
</span><a name="line-437"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardReceivedFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-438"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardReceivedFunc</span><span>
</span><a name="line-439"></a><span>
</span><a name="line-440"></a><span class="hs-comment">-- %hash c:7bb1 d:4ef1</span><span>
</span><a name="line-441"></a><span class="hs-comment">-- | Requests the contents of the clipboard as text. When the text is later</span><span>
</span><a name="line-442"></a><span class="hs-comment">-- received, it will be converted if it is stored in a different character set</span><span>
</span><a name="line-443"></a><span class="hs-comment">-- if necessary, and @callback@ will be called.</span><span>
</span><a name="line-444"></a><span class="hs-comment">--</span><span>
</span><a name="line-445"></a><span class="hs-comment">-- The @text@ parameter to @callback@ will contain the resulting text if the</span><span>
</span><a name="line-446"></a><span class="hs-comment">-- request succeeded, or @Nothing@ if it failed. This could happen for various reasons, in</span><span>
</span><a name="line-447"></a><span class="hs-comment">-- particular if the clipboard was empty or if the contents of the clipboard</span><span>
</span><a name="line-448"></a><span class="hs-comment">-- could not be converted into text form.</span><span>
</span><a name="line-449"></a><span class="hs-comment">--</span><span>
</span><a name="line-450"></a><span class="hs-identifier">clipboardRequestText</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">GlibString</span><span> </span><span class="hs-identifier">string</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-451"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Maybe</span><span> </span><span class="hs-identifier">string</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @callback@ - a function to call when</span><span>
</span><a name="line-452"></a><span>                                     </span><span class="hs-comment">-- the text is received, or the retrieval</span><span>
</span><a name="line-453"></a><span>                                     </span><span class="hs-comment">-- fails. (It will always be called one</span><span>
</span><a name="line-454"></a><span>                                     </span><span class="hs-comment">-- way or the other.)</span><span>
</span><a name="line-455"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-456"></a><span class="hs-identifier">clipboardRequestText</span><span> </span><span class="hs-identifier hs-type">self</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-457"></a><span>  </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">newIORef</span><span> </span><span class="hs-identifier">nullFunPtr</span><span>
</span><a name="line-458"></a><span>  </span><span class="hs-identifier">cbPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardTextReceivedFunc</span><span>
</span><a name="line-459"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-460"></a><span>      </span><span class="hs-identifier">freeHaskellFunPtr</span><span> </span><span class="hs-operator">=&lt;&lt;</span><span> </span><span class="hs-identifier">readIORef</span><span> </span><span class="hs-identifier">cbRef</span><span>
</span><a name="line-461"></a><span>      </span><span class="hs-identifier">mStr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">sPtr</span><span class="hs-operator">==</span><span class="hs-identifier">nullPtr</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-keyword">else</span><span>
</span><a name="line-462"></a><span>        </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-identifier">Just</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">peekUTFString</span><span> </span><span class="hs-identifier">sPtr</span><span>
</span><a name="line-463"></a><span>      </span><span class="hs-identifier">callback</span><span> </span><span class="hs-identifier">mStr</span><span class="hs-special">)</span><span>
</span><a name="line-464"></a><span>  </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-465"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_request_text</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-466"></a><span class="hs-pragma">{-# LINE 449 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-467"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-468"></a><span>    </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-469"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-470"></a><span>
</span><a name="line-471"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardTextReceivedFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Graphics.UI.Gtk.Types.html#ClipboardClass"><span class="hs-identifier hs-type">FunPtr</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-472"></a><span class="hs-pragma">{-# LINE 454 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-473"></a><span>
</span><a name="line-474"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardTextReceivedFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-475"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">CString</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardTextReceivedFunc</span><span>
</span><a name="line-476"></a><span>
</span><a name="line-477"></a><span>
</span><a name="line-478"></a><span>
</span><a name="line-479"></a><span class="hs-comment">-- %hash c:3207 d:e3c1</span><span>
</span><a name="line-480"></a><span class="hs-comment">-- | Requests the contents of the clipboard as image. When the image is later</span><span>
</span><a name="line-481"></a><span class="hs-comment">-- received, it will be converted to a 'Pixbuf', and @callback@ will be called.</span><span>
</span><a name="line-482"></a><span class="hs-comment">--</span><span>
</span><a name="line-483"></a><span class="hs-comment">-- The @pixbuf@ parameter to @callback@ will contain the resulting 'Pixbuf'</span><span>
</span><a name="line-484"></a><span class="hs-comment">-- if the request succeeded, or @Nothing@ if it failed. This could happen for various</span><span>
</span><a name="line-485"></a><span class="hs-comment">-- reasons, in particular if the clipboard was empty or if the contents of the</span><span>
</span><a name="line-486"></a><span class="hs-comment">-- clipboard could not be converted into an image.</span><span>
</span><a name="line-487"></a><span class="hs-comment">--</span><span>
</span><a name="line-488"></a><span class="hs-comment">-- * Available since Gtk+ version 2.6</span><span>
</span><a name="line-489"></a><span class="hs-comment">--</span><span>
</span><a name="line-490"></a><span class="hs-identifier">clipboardRequestImage</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Graphics.UI.Gtk.Types.html#Clipboard"><span class="hs-identifier hs-type">self</span></a><span>
</span><a name="line-491"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-identifier">Pixbuf</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @callback@ - a function to call</span><span>
</span><a name="line-492"></a><span>                                      </span><span class="hs-comment">-- when the image is received, or the</span><span>
</span><a name="line-493"></a><span>                                      </span><span class="hs-comment">-- retrieval fails. (It will always be</span><span>
</span><a name="line-494"></a><span>                                      </span><span class="hs-comment">-- called one way or the other.)</span><span>
</span><a name="line-495"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-496"></a><span class="hs-identifier">clipboardRequestImage</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-497"></a><span>  </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">newIORef</span><span> </span><span class="hs-identifier">nullFunPtr</span><span>
</span><a name="line-498"></a><span>  </span><span class="hs-identifier">cbPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardImageReceivedFunc</span><span>
</span><a name="line-499"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-500"></a><span>      </span><span class="hs-identifier">freeHaskellFunPtr</span><span> </span><span class="hs-operator">=&lt;&lt;</span><span> </span><span class="hs-identifier">readIORef</span><span> </span><span class="hs-identifier">cbRef</span><span>
</span><a name="line-501"></a><span>      </span><span class="hs-identifier">mPixbuf</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">maybeNull</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">makeNewGObject</span><span> </span><span class="hs-identifier">mkPixbuf</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">sPtr</span><span class="hs-special">)</span><span>
</span><a name="line-502"></a><span>      </span><span class="hs-identifier">callback</span><span> </span><span class="hs-identifier">mPixbuf</span><span class="hs-special">)</span><span>
</span><a name="line-503"></a><span>  </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-504"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_request_image</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-505"></a><span class="hs-pragma">{-# LINE 486 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-506"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-507"></a><span>    </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-508"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-509"></a><span>
</span><a name="line-510"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardImageReceivedFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Pixbuf</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-511"></a><span class="hs-pragma">{-# LINE 491 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-512"></a><span>
</span><a name="line-513"></a><a name="clipboardRequestTargets"><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardRequestTargets"><span class="hs-identifier">foreign</span></a></a><span> </span><span class="hs-keyword">import</span><span> </span><a name="clipboardRequestTargets"><a href="Graphics.UI.Gtk.General.Clipboard.html#clipboardRequestTargets"><span class="hs-identifier">ccall</span></a></a><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardImageReceivedFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-514"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679283802"><a href="#local-6989586621679283802"><span class="hs-identifier">Ptr</span></a></a><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Ptr</span><span> </span><span class="hs-identifier hs-var">Pixbuf</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardImageReceivedFunc</span><span>
</span><a name="line-515"></a><span>
</span><a name="line-516"></a><span>
</span><a name="line-517"></a><span>
</span><a name="line-518"></a><span>
</span><a name="line-519"></a><span class="hs-comment">-- %hash c:63f6 d:c0e1</span><span>
</span><a name="line-520"></a><span class="hs-comment">-- | Requests the contents of the clipboard as list of supported targets. When</span><span>
</span><a name="line-521"></a><span class="hs-comment">-- the list is later received, @callback@ will be called.</span><span>
</span><a name="line-522"></a><span class="hs-comment">--</span><span>
</span><a name="line-523"></a><span class="hs-comment">-- The @targets@ parameter to @callback@ will contain the resulting targets</span><span>
</span><a name="line-524"></a><span class="hs-comment">-- if the request succeeded, or @Nothing@ if it failed.</span><span>
</span><a name="line-525"></a><span class="hs-comment">--</span><span>
</span><a name="line-526"></a><span class="hs-comment">-- * Available since Gtk+ version 2.4</span><span>
</span><a name="line-527"></a><span class="hs-comment">--</span><span>
</span><a name="line-528"></a><span class="hs-identifier">clipboardRequestTargets</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Graphics.UI.Gtk.Types.html#Clipboard"><span class="hs-identifier hs-type">self</span></a><span>
</span><a name="line-529"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">TargetTag</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @callback@ - a function to call</span><span>
</span><a name="line-530"></a><span>                                        </span><span class="hs-comment">-- when the targets are received, or</span><span>
</span><a name="line-531"></a><span>                                        </span><span class="hs-comment">-- the retrieval fails. (It will always</span><span>
</span><a name="line-532"></a><span>                                        </span><span class="hs-comment">-- be called one way or the other.)</span><span>
</span><a name="line-533"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-534"></a><span class="hs-identifier">clipboardRequestTargets</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-535"></a><span>  </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">newIORef</span><span> </span><span class="hs-identifier">nullFunPtr</span><span>
</span><a name="line-536"></a><span>  </span><span class="hs-identifier">cbPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardTargetsReceivedFunc</span><span>
</span><a name="line-537"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">tPtr</span><span> </span><span class="hs-identifier">len</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-538"></a><span>      </span><span class="hs-comment">-- We must free Haskell pointer *in* the callback to avoid segfault.</span><span>
</span><a name="line-539"></a><span>      </span><span class="hs-identifier">freeHaskellFunPtr</span><span> </span><span class="hs-operator">=&lt;&lt;</span><span> </span><span class="hs-identifier">readIORef</span><span> </span><span class="hs-identifier">cbRef</span><span>
</span><a name="line-540"></a><span>      </span><span class="hs-identifier">mTargets</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">tPtr</span><span class="hs-operator">==</span><span class="hs-identifier">nullPtr</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-keyword">else</span><span>
</span><a name="line-541"></a><span>        </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Just</span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-identifier">map</span><span> </span><span class="hs-identifier">Atom</span><span class="hs-special">)</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-identifier">peekArray</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">len</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">tPtr</span><span>
</span><a name="line-542"></a><span>      </span><span class="hs-identifier">callback</span><span> </span><span class="hs-identifier">mTargets</span><span class="hs-special">)</span><span>
</span><a name="line-543"></a><span>  </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-544"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_request_targets</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-545"></a><span class="hs-pragma">{-# LINE 524 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-546"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-547"></a><span>    </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-548"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-549"></a><span>
</span><a name="line-550"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardTargetsReceivedFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-551"></a><span class="hs-pragma">{-# LINE 529 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-552"></a><span>
</span><a name="line-553"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardTargetsReceivedFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-554"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679283820"><a href="#local-6989586621679283820"><span class="hs-identifier">Ptr</span></a></a><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.Gtk.General.Clipboard.html#mkClipboardRichTextReceivedFunc"><span class="hs-identifier hs-var">Ptr</span></a><span> </span><span class="hs-special">(</span><a href="Graphics.UI.Gtk.General.Clipboard.html#mkClipboardRichTextReceivedFunc"><span class="hs-identifier hs-var">Ptr</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.Gtk.General.Clipboard.html#mkClipboardRichTextReceivedFunc"><span class="hs-identifier hs-var">CInt</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardTargetsReceivedFunc</span><span>
</span><a name="line-555"></a><span>
</span><a name="line-556"></a><span>
</span><a name="line-557"></a><span class="hs-comment">-- %hash c:5601 d:d6a6</span><span>
</span><a name="line-558"></a><span class="hs-comment">-- | Requests the contents of the clipboard as rich text. When the rich text</span><span>
</span><a name="line-559"></a><span class="hs-comment">-- is later received, @callback@ will be called.</span><span>
</span><a name="line-560"></a><span class="hs-comment">--</span><span>
</span><a name="line-561"></a><span class="hs-comment">-- The @text@ parameter to @callback@ will contain the resulting rich text if</span><span>
</span><a name="line-562"></a><span class="hs-comment">-- the request succeeded, or @Nothing@ if it failed. This function can fail</span><span>
</span><a name="line-563"></a><span class="hs-comment">-- for various reasons, in particular if the clipboard was empty or if the</span><span>
</span><a name="line-564"></a><span class="hs-comment">-- contents of the clipboard could not be converted into rich text form.</span><span>
</span><a name="line-565"></a><span class="hs-comment">--</span><span>
</span><a name="line-566"></a><span class="hs-comment">-- * Available since Gtk+ version 2.10</span><span>
</span><a name="line-567"></a><span class="hs-comment">--</span><span>
</span><a name="line-568"></a><span class="hs-identifier">clipboardRequestRichText</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">TextBufferClass</span><span> </span><span class="hs-identifier">buffer</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">GlibString</span><span> </span><span class="hs-identifier">string</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">self</span><span>
</span><a name="line-569"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">buffer</span><span> </span><span class="hs-comment">-- ^ @buffer@ - a 'TextBuffer' that determines the supported rich text formats</span><span>
</span><a name="line-570"></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">TargetTag</span><span class="hs-special">,</span><span class="hs-identifier">string</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ @callback@ - a function to call</span><span>
</span><a name="line-571"></a><span>                                         </span><span class="hs-comment">-- when the text is received, or the</span><span>
</span><a name="line-572"></a><span>                                         </span><span class="hs-comment">-- retrieval fails. (It will always be</span><span>
</span><a name="line-573"></a><span>                                         </span><span class="hs-comment">-- called one way or the other.)</span><span>
</span><a name="line-574"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-575"></a><span class="hs-identifier">clipboardRequestRichText</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">buffer</span><span> </span><span class="hs-identifier">callback</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-576"></a><span>  </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">newIORef</span><span> </span><span class="hs-identifier">nullFunPtr</span><span>
</span><a name="line-577"></a><span>  </span><span class="hs-identifier">cbPtr</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">mkClipboardRichTextReceivedFunc</span><span>
</span><a name="line-578"></a><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">tPtr</span><span> </span><span class="hs-identifier">sPtr</span><span> </span><span class="hs-identifier">len</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-579"></a><span>      </span><span class="hs-identifier">freeHaskellFunPtr</span><span> </span><span class="hs-operator">=&lt;&lt;</span><span> </span><span class="hs-identifier">readIORef</span><span> </span><span class="hs-identifier">cbRef</span><span>
</span><a name="line-580"></a><span>      </span><span class="hs-identifier">mRes</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">sPtr</span><span class="hs-operator">==</span><span class="hs-identifier">nullPtr</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier">return</span><span> </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier">liftM</span><span> </span><span class="hs-identifier">Just</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-581"></a><span>        </span><span class="hs-identifier">str</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">peekUTFStringLen</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">castPtr</span><span> </span><span class="hs-identifier">sPtr</span><span class="hs-special">,</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">len</span><span class="hs-special">)</span><span>
</span><a name="line-582"></a><span>        </span><span class="hs-identifier">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Atom</span><span> </span><span class="hs-identifier">tPtr</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">str</span><span class="hs-special">)</span><span>
</span><a name="line-583"></a><span>      </span><span class="hs-identifier">callback</span><span> </span><span class="hs-identifier">mRes</span><span class="hs-special">)</span><span>
</span><a name="line-584"></a><span>  </span><span class="hs-identifier">writeIORef</span><span> </span><span class="hs-identifier">cbRef</span><span> </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-585"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">TextBuffer</span><span> </span><span class="hs-identifier">arg2</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr2</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_request_rich_text</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">argPtr2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-identifier">arg4</span><span class="hs-special">)</span><span>
</span><a name="line-586"></a><span class="hs-pragma">{-# LINE 563 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-587"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-588"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toTextBuffer</span><span> </span><span class="hs-identifier">buffer</span><span class="hs-special">)</span><span>
</span><a name="line-589"></a><span>    </span><span class="hs-identifier">cbPtr</span><span>
</span><a name="line-590"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-591"></a><span>
</span><a name="line-592"></a><span class="hs-keyword">type</span><span> </span><span class="hs-identifier">ClipboardRichTextReceivedFunc</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CUChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CULong</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-593"></a><span class="hs-pragma">{-# LINE 569 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-594"></a><span>
</span><a name="line-595"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;wrapper&quot;</span><span> </span><span class="hs-identifier">mkClipboardRichTextReceivedFunc</span><span> </span><span class="hs-glyph">::</span><span>
</span><a name="line-596"></a><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CUChar</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CULong</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-597"></a><span>  </span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">ClipboardRichTextReceivedFunc</span><span>
</span><a name="line-598"></a><span>
</span><a name="line-599"></a><span>
</span><a name="line-600"></a><span>
</span><a name="line-601"></a><span>
</span><a name="line-602"></a><span class="hs-comment">-- %hash c:6e6a d:f98a</span><span>
</span><a name="line-603"></a><span class="hs-comment">-- | Hints that the clipboard data should be stored somewhere when the</span><span>
</span><a name="line-604"></a><span class="hs-comment">-- application exits or when 'clipboardStore' is called.</span><span>
</span><a name="line-605"></a><span class="hs-comment">--</span><span>
</span><a name="line-606"></a><span class="hs-comment">-- This value is reset when the clipboard owner changes. Where the clipboard</span><span>
</span><a name="line-607"></a><span class="hs-comment">-- data is stored is platform dependent, see 'displayStoreClipboard' for more</span><span>
</span><a name="line-608"></a><span class="hs-comment">-- information.</span><span>
</span><a name="line-609"></a><span class="hs-comment">--</span><span>
</span><a name="line-610"></a><span class="hs-comment">-- * Available since Gtk+ version 2.6</span><span>
</span><a name="line-611"></a><span class="hs-comment">--</span><span>
</span><a name="line-612"></a><span class="hs-identifier">clipboardSetCanStore</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span>
</span><a name="line-613"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">Maybe</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier">TargetTag</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">InfoId</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ @targets@ - list containing information</span><span>
</span><a name="line-614"></a><span>                                </span><span class="hs-comment">-- about which forms should be stored or</span><span>
</span><a name="line-615"></a><span>                                </span><span class="hs-comment">-- @Nothing@ to indicate that all forms</span><span>
</span><a name="line-616"></a><span>                                </span><span class="hs-comment">-- should be stored.</span><span>
</span><a name="line-617"></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-618"></a><span class="hs-identifier">clipboardSetCanStore</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-identifier">Nothing</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-619"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_can_store</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-620"></a><span class="hs-pragma">{-# LINE 595 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-621"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-622"></a><span>    </span><span class="hs-identifier">nullPtr</span><span>
</span><a name="line-623"></a><span>    </span><span class="hs-number">0</span><span>
</span><a name="line-624"></a><span class="hs-identifier">clipboardSetCanStore</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Just</span><span> </span><span class="hs-identifier">targets</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-625"></a><span>  </span><span class="hs-identifier">withTargetEntries</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">nTargets</span><span> </span><span class="hs-identifier">targets</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><a name="line-626"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_set_can_store</span><span> </span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-identifier">arg2</span><span> </span><span class="hs-identifier">arg3</span><span class="hs-special">)</span><span>
</span><a name="line-627"></a><span class="hs-pragma">{-# LINE 601 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-628"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-629"></a><span>    </span><span class="hs-identifier">targets</span><span>
</span><a name="line-630"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">fromIntegral</span><span> </span><span class="hs-identifier">nTargets</span><span class="hs-special">)</span><span>
</span><a name="line-631"></a><span>
</span><a name="line-632"></a><span class="hs-comment">-- %hash c:f98a d:ded8</span><span>
</span><a name="line-633"></a><span class="hs-comment">-- | Stores the current clipboard data somewhere so that it will stay around</span><span>
</span><a name="line-634"></a><span class="hs-comment">-- after the application has quit.</span><span>
</span><a name="line-635"></a><span class="hs-comment">--</span><span>
</span><a name="line-636"></a><span class="hs-comment">-- * Available since Gtk+ version 2.6</span><span>
</span><a name="line-637"></a><span class="hs-comment">--</span><span>
</span><a name="line-638"></a><span class="hs-identifier">clipboardStore</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">ClipboardClass</span><span> </span><a href="Graphics.UI.Gtk.Types.html#Clipboard"><span class="hs-identifier hs-type">self</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-639"></a><span class="hs-identifier">clipboardStore</span><span> </span><span class="hs-identifier">self</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-640"></a><span>  </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-identifier">Clipboard</span><span> </span><span class="hs-identifier">arg1</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">withForeignPtr</span><span> </span><span class="hs-identifier">arg1</span><span> </span><span class="hs-operator">$</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">argPtr1</span><span> </span><span class="hs-glyph">-&gt;</span><span class="hs-identifier">gtk_clipboard_store</span><span> </span><span class="hs-identifier">argPtr1</span><span class="hs-special">)</span><span>
</span><a name="line-641"></a><span class="hs-pragma">{-# LINE 614 &quot;./Graphics/UI/Gtk/General/Clipboard.chs&quot; #-}</span><span>
</span><a name="line-642"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">toClipboard</span><span> </span><span class="hs-identifier">self</span><span class="hs-special">)</span><span>
</span><a name="line-643"></a><span>
</span><a name="line-644"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_get&quot;</span><span>
</span><a name="line-645"></a><span>  </span><span class="hs-identifier">gtk_clipboard_get</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-646"></a><span>
</span><a name="line-647"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_get_for_display&quot;</span><span>
</span><a name="line-648"></a><span>  </span><span class="hs-identifier">gtk_clipboard_get_for_display</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Display</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-649"></a><span>
</span><a name="line-650"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_get_display&quot;</span><span>
</span><a name="line-651"></a><span>  </span><span class="hs-identifier">gtk_clipboard_get_display</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Display</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-652"></a><span>
</span><a name="line-653"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_set_with_data&quot;</span><span>
</span><a name="line-654"></a><span>  </span><span class="hs-identifier">gtk_clipboard_set_with_data</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-655"></a><span>
</span><a name="line-656"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">unsafe</span><span> </span><span class="hs-string">&quot;g_object_set_qdata_full&quot;</span><span>
</span><a name="line-657"></a><span>  </span><span class="hs-identifier">g_object_set_qdata_full</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">GObject</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-658"></a><span>
</span><a name="line-659"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_set_with_owner&quot;</span><span>
</span><a name="line-660"></a><span>  </span><span class="hs-identifier">gtk_clipboard_set_with_owner</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CUInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">GObject</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-identifier">CInt</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-661"></a><span>
</span><a name="line-662"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_get_owner&quot;</span><span>
</span><a name="line-663"></a><span>  </span><span class="hs-identifier">gtk_clipboard_get_owner</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">GObject</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-664"></a><span>
</span><a name="line-665"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_clear&quot;</span><span>
</span><a name="line-666"></a><span>  </span><span class="hs-identifier">gtk_clipboard_clear</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-667"></a><span>
</span><a name="line-668"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_set_text&quot;</span><span>
</span><a name="line-669"></a><span>  </span><span class="hs-identifier">gtk_clipboard_set_text</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-670"></a><span>
</span><a name="line-671"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_set_image&quot;</span><span>
</span><a name="line-672"></a><span>  </span><span class="hs-identifier">gtk_clipboard_set_image</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Pixbuf</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-673"></a><span>
</span><a name="line-674"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_request_contents&quot;</span><span>
</span><a name="line-675"></a><span>  </span><span class="hs-identifier">gtk_clipboard_request_contents</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-676"></a><span>
</span><a name="line-677"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_request_text&quot;</span><span>
</span><a name="line-678"></a><span>  </span><span class="hs-identifier">gtk_clipboard_request_text</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-679"></a><span>
</span><a name="line-680"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_request_image&quot;</span><span>
</span><a name="line-681"></a><span>  </span><span class="hs-identifier">gtk_clipboard_request_image</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Pixbuf</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-682"></a><span>
</span><a name="line-683"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_request_targets&quot;</span><span>
</span><a name="line-684"></a><span>  </span><span class="hs-identifier">gtk_clipboard_request_targets</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-685"></a><span>
</span><a name="line-686"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_request_rich_text&quot;</span><span>
</span><a name="line-687"></a><span>  </span><span class="hs-identifier">gtk_clipboard_request_rich_text</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">TextBuffer</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">FunPtr</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">CUChar</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CULong</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-688"></a><span>
</span><a name="line-689"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_set_can_store&quot;</span><span>
</span><a name="line-690"></a><span>  </span><span class="hs-identifier">gtk_clipboard_set_can_store</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">CInt</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-691"></a><span>
</span><a name="line-692"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">safe</span><span> </span><span class="hs-string">&quot;gtk_clipboard_store&quot;</span><span>
</span><a name="line-693"></a><span>  </span><span class="hs-identifier">gtk_clipboard_store</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-identifier">Ptr</span><span> </span><span class="hs-identifier">Clipboard</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-694"></a></pre></body></html>